service: imagehost

provider:
  name: aws
  stage: production
  region: us-east-1
  runtime: nodejs8.10
  environment:
    NODE_ENV: production
    BUCKET: 'img-dixionary'
    BASE_URL: 'https://img.dixionary.com'
    IMAGE_CDN: 'https://cdn.dixionary.com'


functions:
  main:
    handler: src/handler.render
    events:
      - http: ANY /
      - http: ANY /{proxy+}

plugins:
    - serverless-domain-manager
    - serverless-apigw-binary

custom:
  apigwBinary:
      types:
        - '*/*'
  customDomain:
    domainName: img.dixionary.com
    stage: production
    certificateName: '*.dixionary.com'
    createRoute53Record: true
